# GitHub Secrets - Подробная инструкция для Frontend

## Где добавить секреты

1. Перейдите в ваш репозиторий на GitHub
2. Нажмите на вкладку **Settings** (Настройки)
3. В левом меню выберите **Secrets and variables** → **Actions**
4. Нажмите кнопку **New repository secret**

## Список необходимых секретов

### 1. SSH_HOST

**Название:** `SSH_HOST`

**Значение:**
```
89.104.67.36
```

**Описание:** IP адрес или доменное имя сервера, на который будет происходить развертывание.

---

### 2. SSH_USERNAME

**Название:** `SSH_USERNAME`

**Значение (пример):**
```
root
```
или
```
ubuntu
```
или
```
deploy
```

**Описание:** Имя пользователя для SSH подключения к серверу. Обычно это `root`, `ubuntu`, `deploy` или другое имя пользователя, созданное на сервере.

**Как узнать:** Выполните на сервере команду `whoami` или посмотрите в настройках вашего облачного провайдера.

---

### 3. SSH_PRIVATE_KEY

**Название:** `SSH_PRIVATE_KEY`

**Значение (пример):**
```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
NhAAAAAwEAAQAAAYEAyK8x... (полный ключ)
-----END OPENSSH PRIVATE KEY-----
```

**Описание:** Приватный SSH ключ для аутентификации на сервере.

**Как создать SSH ключ:**

1. На вашем локальном компьютере выполните:
```bash
ssh-keygen -t rsa -b 4096 -C "github-actions"
```

2. Когда появится запрос, введите путь для сохранения (или нажмите Enter для значения по умолчанию):
```
Enter file in which to save the key (/Users/yourname/.ssh/id_rsa): github_actions_key
```

3. Введите парольную фразу (или оставьте пустой):
```
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```

4. Скопируйте **приватный** ключ:
```bash
cat github_actions_key
```

5. Скопируйте **публичный** ключ на сервер:
```bash
ssh-copy-id -i github_actions_key.pub username@89.104.67.36
```

Или вручную:
```bash
cat github_actions_key.pub | ssh username@89.104.67.36 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

**Важно:** 
- В GitHub Secrets добавляйте **ПРИВАТНЫЙ** ключ (файл без `.pub`)
- Публичный ключ (`.pub`) должен быть на сервере в `~/.ssh/authorized_keys`
- Вставляйте ключ полностью, включая строки `-----BEGIN...` и `-----END...`

---

### 4. SSH_PORT

**Название:** `SSH_PORT`

**Значение:**
```
22
```

**Описание:** Порт SSH на сервере. Стандартный порт - 22. Если используется другой порт, укажите его.

**Опционально:** Если не указан, будет использован порт 22 по умолчанию.

---

### 5. API_URL

**Название:** `API_URL`

**Значение:**
```
http://89.104.67.36:44315
```

**Описание:** URL API бэкенда. Используется при сборке фронтенда для настройки базового URL API (если настроено в build процессе).

**Опционально:** Если не указан, будет использован `http://89.104.67.36:44315` по умолчанию.

**Варианты:**
- `http://89.104.67.36:44315` - для HTTP
- `https://yourdomain.com:44315` - если используется домен с HTTPS

**Примечание:** В текущей конфигурации API URL настраивается в `nginx.conf` для проксирования запросов. Если вы хотите использовать переменную окружения при сборке, необходимо обновить `Dockerfile` и `vite.config.js`.

---

## Пример заполнения всех секретов

```
SSH_HOST = 89.104.67.36
SSH_USERNAME = root
SSH_PRIVATE_KEY = -----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
NhAAAAAwEAAQAAAYEAyK8x...
(полный ключ)
-----END OPENSSH PRIVATE KEY-----
SSH_PORT = 22
API_URL = http://89.104.67.36:44315
```

## Проверка секретов

После добавления всех секретов:

1. Перейдите в **Actions** в вашем репозитории
2. Выберите workflow (например, "Deploy Frontend")
3. Нажмите **Run workflow**
4. Проверьте логи выполнения

Если есть ошибки подключения:
- Проверьте правильность SSH ключа
- Убедитесь, что публичный ключ добавлен на сервер
- Проверьте, что порт SSH открыт

## Безопасность

⚠️ **ВАЖНО:**
- Никогда не коммитьте секреты в код
- Не делитесь секретами публично
- Регулярно обновляйте SSH ключи
- Используйте разные ключи для разных окружений (dev/staging/prod)
- Ротация SSH ключей каждые 90 дней

